# Trader Bot — версия 1.1

Телеграм-бот под деплой на Render, работающий через webhook.

## Что есть в версии 1.1

- Добавлена команда `/help`, которая отправляет содержимое файла `Bot_commands.txt`.
- Добавлена команда `/symbols`:
  - `/symbols` — показывает текущий список торговых пар из `symbols_list.json`.
  - `/symbols btcusdc, ethusdc` — перезаписывает `symbols_list.json` нормализованным списком в верхнем регистре.
- Файл `symbols_list.json` хранится на persistent-диске Render в каталоге `STORAGE_DIR`.
- Весь функционал команд `/help` и `/symbols` вынесен в модуль `metrics.py`, чтобы не раздувать `main.py`.

## Что было в версии 1.0

- FastAPI-приложение с webhook-эндпоинтом для Telegram.
- Эндпоинт `GET /health` и `HEAD /health` для health-check'а Render.
- При старте сервиса:
  - устанавливается webhook на `WEBHOOK_BASE + "/webhook/<BOT_TOKEN>"`;
  - в канал/чат `ADMIN_CHAT_ID` отправляется сообщение:  
    **"Бот запущен. Версия 1.0"** (в 1.1 заменено на "Бот запущен. Версия 1.1").
- Простейший хэндлер `/start` — отвечает сообщением  
  **"Бот онлайн. Версия 1.0"** (в 1.1 заменено на "Бот онлайн. Версия 1.1").

## Переменные окружения

- `BOT_TOKEN` — токен Telegram-бота
- `ADMIN_CHAT_ID` — ID админского канала/чата
- `ADMIN_KEY` — ключ админа (в этой версии не используется)
- `BINANCE_API_KEY` — ключ Binance (не используется в 1.1)
- `BINANCE_API_SECRET` — секрет Binance (не используется в 1.1)
- `HTTP_PROXY` — HTTP-прокси (пока не используется)
- `HTTPS_PROXY` — HTTPS-прокси (пока не используется)
- `RAW_MAX_BYTES` — лимит размера raw-файлов (пока не используется)
- `STORAGE_DIR` — корень диска на Render для хранения state-файлов (используется для `symbols_list.json`)
- `WEBHOOK_BASE` — публичный URL сервиса на Render без завершающего `/`
- `TF1` — старший таймфрейм (резерв на будущие версии)
- `TF2` — младший таймфрейм (резерв на будущие версии)

## История версий

- **1.1** — добавлены команды `/help` и `/symbols`, файл `Bot_commands.txt` и работа с `symbols_list.json`.
- **1.0** — базовый скелет бота: FastAPI + webhook, health-check, уведомление админа о запуске.
