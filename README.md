# TRAIDER_BOT v5.1

## Что нового

### ✅ Новый модуль: market_calculation.py
- Расчет raw сигналов для пар фреймов (12h+6h и 4h+2h)
- Автоматическое сохранение в `.jsonl` файлы
- История сигналов для последующей агрегации

### ✅ Структура данных v5.0
- 30 свечей вместо 100 (70% экономия)
- История SMA14/ATR14 для расчетов
- Все фильтры сохраняются

## Файлы (по паре)

```
<SYMBOL>.json               — основные метрики
<SYMBOL>_raw_market_12+6.jsonl  — raw сигналы (12h+6h)
<SYMBOL>_raw_market_4+2.jsonl   — raw сигналы (4h+2h)
```

## Команды

- `/start` — справка
- `/coins PAIR1 PAIR2` — добавить пары
- `/now` — собрать метрики + рассчитать raw режимы
- `/data` — список файлов
- `/data export all` — отправить все
- `/data delete all` — удалить все

## Процесс /now

1. Собирает свежие метрики (ticker, filters, klines, indicators)
2. Рассчитывает raw сигналы для обеих пар фреймов
3. Сохраняет в `.jsonl` файлы (append mode)
4. Готово для последующей агрегации (v5.2+)

## Raw Файлы

Каждая строка — JSON запись:
```json
{
  "timestamp": "2025-11-12T05:20:00Z",
  "signal": "RANGE",
  "signals": {"12h": "RANGE", "6h": "RANGE"},
  "frame": "12+6"
}
```

---
Version 5.1 - 12.11.2025
