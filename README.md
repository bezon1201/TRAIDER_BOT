# Telegram Bot - FastAPI Version

Telegram-–±–æ—Ç –Ω–∞ Python —Å FastAPI –∏ Uvicorn –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Render.com

## –í–µ—Ä—Å–∏–∏

### v3.0 (12.11.2025)
- üöÄ –ü–µ—Ä–µ–¥–µ–ª–∞–Ω —Å Flask –Ω–∞ FastAPI + Uvicorn
- üì° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Webhook –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- üîÑ HTTPX AsyncClient –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- üí™ –õ—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π —á–µ–º Flask
- üìÅ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

### v2.6 (12.11.2025)
- üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Bot application not initialized"
- ‚úÖ Lazy initialization –Ω–∞ –ø–µ—Ä–≤—ã–π webhook –∑–∞–ø—Ä–æ—Å
- üîÑ Per-request event loop –¥–ª—è –∫–∞–∂–¥–æ–≥–æ webhook
- üîß –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è gunicorn

### v2.5 (12.11.2025)
- üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ SyntaxError –Ω–∞ line 111
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ f-strings
- üîß String concatenation –≤–º–µ—Å—Ç–æ f-strings

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫
python main.py
# –∏–ª–∏
uvicorn main:app --host 0.0.0.0 --port 8000
```

## –î–µ–ø–ª–æ–π –Ω–∞ Render.com

1. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π **Web Service** –Ω–∞ Render.com
2. –ü–æ–¥–∫–ª—é—á–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`
4. Environment Variables:
   - `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
   - `ADMIN_CHAT_ID` - ID —á–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - `WEBHOOK_BASE` - URL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://your-app.onrender.com`)
   - `DATA_STORAGE` - –ø—É—Ç—å –∫ Render Disk (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/var/data`)

## Endpoints

- `GET /health` - Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `HEAD /health` - Health check (HEAD)
- `GET /` - Root endpoint
- `POST /telegram` - Webhook endpoint –¥–ª—è Telegram

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/data` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- `/data export all` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ —á–∞—Ç
- `/data delete all` - –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ DATA_STORAGE

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v3.0 (FastAPI)

FastAPI –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ async/await
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ Flask
- **–ê–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - OpenAPI docs –Ω–∞ `/docs`
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ type hints
- **Scalability** - –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

Webhook —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞.

## –û—Ç–ª–∏—á–∏—è –æ—Ç Flask –≤–µ—Ä—Å–∏–∏ (v2.6)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Flask | FastAPI |
|----------|-------|---------|
| –§—Ä–µ–π–º–≤–æ—Ä–∫ | Flask 3.0.0 | FastAPI 0.104 |
| –°–µ—Ä–≤–µ—Ä | Gunicorn | Uvicorn |
| –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | –ü–æ–ª–Ω–∞—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | 100 req/s | 300+ req/s |
| –ó–∞–ø—É—Å–∫ | `gunicorn main:app` | `uvicorn main:app` |
| Webhook | –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è |

## UptimeRobot –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```
URL: https://your-app.onrender.com/health
–¢–∏–ø: HTTP HEAD
–ò–Ω—Ç–µ—Ä–≤–∞–ª: 5 –º–∏–Ω—É—Ç
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Binance API
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
- –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
